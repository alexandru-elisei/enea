{{!
    @template mod_enea/select
}}

<br>
<h3 class="text">{{# str}} selectoptions, mod_enea {{/ str}}</h3>
<br>

<p class="text-left"> {{# str}} chooseoptions, mod_enea {{/ str}}</p>

<form id="search-results-form">
    <div class="row">
        <div class="text-left col-xs-8 col-md-6 col-lg-6 lead">
            <p id="fieldofexpertise"><dt><u>{{# str}} fieldofexpertise, mod_enea {{/ str}}</u></dt></p>
        </div>
    </div>

    {{< mod_enea/select_expand_row}}
    {{$ option_name}}medicine{{/ option_name}}
    {{$ option_text}}{{# str}} medicine, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_expand_row}}

    <div name="medrevdeps" style="display:none">
        {{# medrevdeps}}
        {{< mod_enea/select_indent_row}}
        {{$ option_name}}{{ name }}{{/ option_name}}
        {{$ option_text}}{{ text }}{{/ option_text}}
        {{/ mod_enea/select_indent_row}}
        {{/ medrevdeps}}
    </div>

    {{< mod_enea/select_row}}
    {{$ option_name}}nursing_midwifery{{/ option_name}}
    {{$ option_text}}{{# str}} nursing_midwifery, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    {{< mod_enea/select_row}}
    {{$ option_name}}nutrition_dietetics{{/ option_name}}
    {{$ option_text}}{{# str}} nutrition_dietetics, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    {{< mod_enea/select_row}}
    {{$ option_name}}otherhealthcareworkers{{/ option_name}}
    {{$ option_text}}{{# str}} otherhealthcareworkers, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    {{< mod_enea/select_row}}
    {{$ option_name}}student_trainee{{/ option_name}}
    {{$ option_text}}{{# str}} student_trainee, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    <br>
    <div class="row">
        <div class="text-left col-xs-10 col-md-8 col-lg-8 lead">
            <p id="topics"><dt><u>{{# str}} topics, mod_enea {{/ str}}<u></dt></p>
        </div>
    </div>

    {{< mod_enea/select_expand_row}}
    {{$ option_name}}pregnancy{{/ option_name}}
    {{$ option_text}}{{# str}} pregnancy, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_expand_row}}

    <div name="pregnancyrevdeps" style="display:none">
        {{# pregnancyrevdeps}}
        {{< mod_enea/select_indent_row}}
        {{$ option_name}}{{ name }}{{/ option_name}}
        {{$ option_text}}{{ text }}{{/ option_text}}
        {{/ mod_enea/select_indent_row}}
        {{/ pregnancyrevdeps}}
    </div>

    {{< mod_enea/select_expand_row}}
    {{$ option_name}}breastfeeding{{/ option_name}}
    {{$ option_text}}{{# str}} breastfeeding, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_expand_row}}

    <div name="bfrevdeps" style="display:none">
        {{# bfrevdeps}}
        {{< mod_enea/select_indent_row}}
        {{$ option_name}}{{ name }}{{/ option_name}}
        {{$ option_text}}{{ text }}{{/ option_text}}
        {{/ mod_enea/select_indent_row}}
        {{/ bfrevdeps}}
    </div>

    {{< mod_enea/select_expand_row}}
    {{$ option_name}}breastmilksubst{{/ option_name}}
    {{$ option_text}}{{# str}} breastmilksubst, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_expand_row}}

    <div name="bmsrevdeps" style="display:none">
        {{# bmsrevdeps}}
        {{< mod_enea/select_indent_row}}
        {{$ option_name}}{{ name }}{{/ option_name}}
        {{$ option_text}}{{ text }}{{/ option_text}}
        {{/ mod_enea/select_indent_row}}
        {{/ bmsrevdeps}}
    </div>

    {{< mod_enea/select_expand_row}}
    {{$ option_name}}preterm{{/ option_name}}
    {{$ option_text}}{{# str}} preterm, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_expand_row}}

    <div name="pretermrevdeps" style="display:none">
        {{# pretermrevdeps}}
        {{< mod_enea/select_indent_row}}
        {{$ option_name}}{{ name }}{{/ option_name}}
        {{$ option_text}}{{ text }}{{/ option_text}}
        {{/ mod_enea/select_indent_row}}
        {{/ pretermrevdeps}}
    </div>

    <br>
    <div class="row">
        <div class="text-left col-xs-10 col-md-8 col-lg-8 lead">
            <p id="othertopics"><dt><u>{{# str}} othertopics, mod_enea {{/ str}}<u></dt></p>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-5 col-md-3 col-lg-3">
            <textarea class="form-control" name="text" rows="5" size="20" placeholder="Please provide a detailed description of your topics of interests (min 15 words)"></textarea>
        </div>
    </div>

    <br>
    <div class="row">
        <div class="text-left col-xs-10 col-md-8 col-lg-8 lead">
            <p id="themes"><dt><u>{{# str}} themes, mod_enea {{/ str}}<u></dt></p>
        </div>
    </div>

    {{< mod_enea/select_row}}
    {{$ option_name}}background{{/ option_name}}
    {{$ option_text}}{{# str}} background, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    {{< mod_enea/select_row}}
    {{$ option_name}}practicecounselling{{/ option_name}}
    {{$ option_text}}{{# str}} practicecounselling, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    {{< mod_enea/select_row}}
    {{$ option_name}}guidelines{{/ option_name}}
    {{$ option_text}}{{# str}} guidelines, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    <br>
    <div class="row">
        <div class="text-left col-xs-10 col-md-8 col-lg-8 lead">
            <p id="cmepoints"><dt><u>{{# str}} cmepoints, mod_enea {{/ str}}<u></dt></p>
        </div>
    </div>

    {{< mod_enea/select_row}}
    {{$ option_name}}cme{{/ option_name}}
    {{$ option_text}}{{# str}} cmeaccredited, mod_enea {{/ str}}{{/ option_text}}
    {{/ mod_enea/select_row}}

    <div style="display: none">
        {{# id}}
        <input name="id" type="hidden" value="{{ id }}">
        {{/ id}}
        {{# cmid}}
        <input name="cmid" type="hidden" value="{{ cmid }}">
        {{/ cmid}}
    </div>

    <br>
    <div class="form-inline felement data-fieldtype="group"">
        <div class="form-group fitem">
            <input type="submit" class="btn btn-primary" name="searchbutton" value="{{# str}} search, mod_enea {{/ str}}">
        </div>
        <input class="btn btn-secondary" type="reset" name="clearbutton" value="{{# str}} clear, mod_enea {{/ str}}">
    </div>
</form>

{{# js}}
    require(['jquery'], function($) {

        $('[name="medicine_expand_collapse"]').click(function () {
            $('[name="medrevdeps"]').toggle(300);
        });

        /*
         * When checked, expand and select all children courses. When unchecked,
         * deselect all children courses.
         */
        $('[name="medicine"]').change(function() {
            if (this.checked) {
                $('[name="medrevdeps"]').show(300);
                {{# medrevdeps}}
                $('[name="{{ name }}"]').prop('checked', true);
                {{/ medrevdeps}}
            } else {
                {{# medrevdeps}}
                $('[name="{{ name }}"]').prop('checked', false);
                {{/ medrevdeps}}
            }
        });

        /*
         * Uncheck medicine when all children courses are deselected. Check
         * medicine when at least one children course is checked.
         */
        {{# medrevdeps}}
        $('[name="{{ name }}"]').change(function() {
            var all_disabled = true;
            {{# medrevdeps}}
            if ($('[name="{{ name }}"]').prop('checked')) {
                all_disabled = false;
                if (!($('[name="medicine"]').prop('checked')))
                    $('[name="medicine"]').prop('checked', true);
            }
            {{/ medrevdeps}}
            if (all_disabled) {
                $('[name="medicine"]').prop('checked', false);
            }
        });
        {{/ medrevdeps}}

        $('[name="pregnancy_expand_collapse"]').click(function () {
            $('[name="pregnancyrevdeps"]').toggle(300);
        });

        $('[name="pregnancy"]').change(function() {
            if (this.checked) {
                $('[name="pregnancyrevdeps"]').show(300);
                {{# pregnancyrevdeps}}
                $('[name="{{ name }}"]').prop('checked', true);
                {{/ pregnancyrevdeps}}
            } else {
                {{# pregnancyrevdeps}}
                $('[name="{{ name }}"]').prop('checked', false);
                {{/ pregnancyrevdeps}}
            }
        });

        /*
         * Uncheck pregnancy when all children courses are deselected. Check
         * pregnancy when at least one children course is checked.
         */
        {{# pregnancyrevdeps}}
        $('[name="{{ name }}"]').change(function() {
            var all_disabled = true;
            {{# pregnancyrevdeps}}
            if ($('[name="{{ name }}"]').prop('checked')) {
                all_disabled = false;
                if (!($('[name="pregnancy"]').prop('checked')))
                    $('[name="pregnancy"]').prop('checked', true);
            }
            {{/ pregnancyrevdeps}}
            if (all_disabled) {
                $('[name="pregnancy"]').prop('checked', false);
            }
        });
        {{/ pregnancyrevdeps}}

        $('[name="breastfeeding_expand_collapse"]').click(function () {
            $('[name="bfrevdeps"]').toggle(300);
        });

        $('[name="breastfeeding"]').change(function() {
            if (this.checked) {
                $('[name="bfrevdeps"]').show(300);
                {{# bfrevdeps}}
                $('[name="{{ name }}"]').prop('checked', true);
                {{/ bfrevdeps}}
            } else {
                {{# bfrevdeps}}
                $('[name="{{ name }}"]').prop('checked', false);
                {{/ bfrevdeps}}
            }
        });

        /*
         * Uncheck breastfeeding when all children courses are deselected.
         * Check breastfeeding when at least one children course is checked.
         */
        {{# bfrevdeps}}
        $('[name="{{ name }}"]').change(function() {
            var all_disabled = true;
            {{# bfrevdeps}}
            if ($('[name="{{ name }}"]').prop('checked')) {
                all_disabled = false;
                if (!($('[name="breastfeeding"]').prop('checked')))
                    $('[name="breastfeeding"]').prop('checked', true);
            }
            {{/ bfrevdeps}}
            if (all_disabled) {
                $('[name="breastfeeding"]').prop('checked', false);
            }
        });
        {{/ bfrevdeps}}

        $('[name="breastmilksubst_expand_collapse"]').click(function () {
            $('[name="bmsrevdeps"]').toggle(300);
        });

        $('[name="breastmilksubst"]').change(function() {
            if (this.checked) {
                $('[name="bmsrevdeps"]').show(300);
                {{# bmsrevdeps}}
                $('[name="{{ name }}"]').prop('checked', true);
                {{/ bmsrevdeps}}
            } else {
                {{# bmsrevdeps}}
                $('[name="{{ name }}"]').prop('checked', false);
                {{/ bmsrevdeps}}
            }
        });

        /*
         * Uncheck breastmilksubst when all children courses are deselected.
         * Check breastmilksubst when at least one children course is checked.
         */
        {{# bmsrevdeps}}
        $('[name="{{ name }}"]').change(function() {
            var all_disabled = true;
            {{# bmsrevdeps}}
            if ($('[name="{{ name }}"]').prop('checked')) {
                all_disabled = false;
                if (!($('[name="breastmilksubst"]').prop('checked')))
                    $('[name="breastmilksubst"]').prop('checked', true);
            }
            {{/ bmsrevdeps}}
            if (all_disabled) {
                $('[name="breastmilksubst"]').prop('checked', false);
            }
        });
        {{/ bmsrevdeps}}

        $('[name="preterm_expand_collapse"]').click(function () {
            $('[name="pretermrevdeps"]').toggle(300);
        });

        $('[name="preterm"]').change(function() {
            if (this.checked) {
                $('[name="pretermrevdeps"]').show(300);
                {{# pretermrevdeps}}
                $('[name="{{ name }}"]').prop('checked', true);
                {{/ pretermrevdeps}}
            } else {
                {{# pretermrevdeps}}
                $('[name="{{ name }}"]').prop('checked', false);
                {{/ pretermrevdeps}}
            }
        });

        /*
         * Uncheck preterm when all children courses are deselected.
         * Check preterm when at least one children course is checked.
         */
        {{# pretermrevdeps}}
        $('[name="{{ name }}"]').change(function() {
            var all_disabled = true;
            {{# pretermrevdeps}}
            if ($('[name="{{ name }}"]').prop('checked')) {
                all_disabled = false;
                if (!($('[name="preterm"]').prop('checked')))
                    $('[name="preterm"]').prop('checked', true);
            }
            {{/ pretermrevdeps}}
            if (all_disabled) {
                $('[name="breastmilksubst"]').prop('checked', false);
            }
        });
        {{/ pretermrevdeps}}
    });
{{/ js}}
